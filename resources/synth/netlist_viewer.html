<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="../web/elk.bundled.js"></script>
    <script type="text/javascript" src="../web/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="../web/svg-pan-zoom.min.js"></script>
    <script type="text/javascript" src="../web/viz.js"></script>
    <script type="text/javascript" src="../web/full.render.js"></script>
    <script type="text/javascript" src="netlistsvg.bundle.js"></script>
    <script type="text/javascript" src="build.js"></script>
    <script type="text/javascript" src="synth.js"></script>
    <script type="text/javascript" src="test.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>netlist view</title>
    <link rel="stylesheet" href="netlist_viewer.css" type="text/css" />
</head>

<body>
    <p> Terminal of synth</p>
    <div class="main">
        <div>
            <div style=display:flex;justify-content:space-between>
                <button id=Clean>Clean </button>
                <!-- <button id=Display>Hide </button> -->
                <div>
                    <label for=synthStyle>Synth Style:</label>
                    <select id=synthStyle>
                        <option value=0>Before Behavioral Synth</option>
                        <option value=1>After Behavioral Synth</option>
                        <option value=2>After RTL Synth</option>
                    </select>
                    <button id=Run>RUN</button>
                </div>
            </div>
            <!-- <textarea id="synthTerminal" spellcheck="false" autocomplete="off" autocapitalize="off" autocorrect="off"></textarea> -->
            <div class="terminal">
                <div class="input-box">
                    <span  class="input-span"></span>
                    <input type="text" class="input">
                </div>
            </div>
        </div>
        <div class="container" id="netlist_container"></div>
    </div>
    <div class="toolbar">
        <div class="center-panel">
            <label class="fancy-checkbox">
                <input id="export-as-svg" name="zoom-mode" type="radio" value="fit" />
                <div class="button">Save as SVG</div>
            </label>
        </div>
    </div>
</body>

</html>

<script>
    function run() {
        let textarea = document.getElementById('synthTerminal');
        let synthStyle = document.getElementById('synthStyle');
        let netlist = synth(synthStyle.value, textarea);
        showNetlist(netlist);
    }
    function clean() {
        let textarea = document.getElementById('synthTerminal');
        textarea.value = '';
        TTY.message = '';
    }
    terminal.on('click', () => {
        input.focus();
    })
    input.on('keypress', function (e) {
        if (e.keyCode == 13) {
            print(input.val());
        }
    })
    // const vscode = acquireVsCodeApi();

    // function export_message(type) {
    //     vscode.postMessage({
    //         command: 'export',
    //         type: type,
    //         svg: last_svg
    //     });
    // }

    // // Handle the message inside the webview
    // window.addEventListener('message', event => {
    //     const message = event.data;
    //     console.log("get the message");
    //     switch (message.command) {
    //         case 'update': refreshModel(message.synthPrjInfo); break;
    //     }
    // });

    // document.getElementById("export-as-svg").onclick = function () {
    //     export_message("svg");
    // };
    refreshModel(test);
    Run.onclick = run;
    Clean.onclick = clean;

</script>