"use strict";

const fs = require("fs");
const fspath = require("path");

function momitor (path, callback) {
    extensions = [".vhd",".vhdl",".vho",".vht",".v",".V",".vh",".vl",".sv",".SV"];
    fs.watch(path, { recursive : true }, function (event, fileName) {
        if (fileName) {
            if (fsWait) return;
            fsWait = setTimeout(() => {
              fsWait = false;
            }, 50);
            if (fs.statSync(fileName).isDirectory()) {
                callback();
            } else {
                extensions.forEach(extname => {
                    if (fspath.extname(fileName).toLowerCase() === extname) {
                        callback();
                    }
                });
            }
        }
    });
}
exports.momitor = momitor;