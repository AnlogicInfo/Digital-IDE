"use strict";

const fs = require("fs");

export function ensureExists(path) {
    return fs.existsSync(path);
}

export function mkdir(path) {
    if (fs.existsSync(path)) {
      return true;
    } else {
        if (this.mkdir(fspath.dirname(path))) {
            fs.mkdirSync(path);
            return true;
        }
    }
}

export function deleteDir(path){
    let files = [];
    if( fs.existsSync(path) ) {  
        files = fs.readdirSync(path);   
        files.forEach(element => {
            let curPath = fspath.join(path,element).replace(/\\/g,"\/");
            if(fs.statSync(curPath).isDirectory()) { 
                this.deleteDir(curPath);
            } else {    
                fs.unlinkSync(curPath);    
            }
        });
        fs.rmdirSync(path); //清除文件夹
    }
}

export function movedir(oldpath,newpath) {
    let folder  = fspath.basename(oldpath);
    newpath = newpath + '/' + folder;
    if (fs.existsSync(oldpath)) {
        if (fs.existsSync(newpath)) {
            this.deleteDir(newpath);
        }
        fs.renameSync(oldpath,newpath);
    }else{
        this.mkdir(newpath);	
    }
}

export function readFolder(path) {
    return fs.readdirSync(path);
}