"use strict";

const fsm_base = require('HDLparser/fsm_parser/fsm_base');

class Paser_fsm_vlog extends fsm_base.Parser_fsm_base {
    constructor() {
        super();
    }
    
    async get_svg_sm(code) {
        let process;
        // 获取处理语句块
        let process = [{
            'code': this.get_deep_process(cursor.currentNode()),
            'comments': comments
        }];
        let stm = [];
        let svg = [];
        for (let i = 0; i < process.length; ++i) {
            let states;
            try {
                // 获取处理块的信息得到状态
                states = this.get_process_info(process[i]);
            }
            catch (e) {
                states = undefined;
            }
            if (states !== undefined) {
                for (let j = 0; j < states.length; ++j) {
                    if (this.check_stm(states[j]) === true) {
                        stm.push(states[j]);
                        let svg_tmp = this.json_to_svg(states[j]);
                        let fsm_tmp = {
                            'svg': svg_tmp,
                            'description': states[j].description
                        };
                        svg.push(fsm_tmp);
                    }
                }
            }
        }
        return { 'svg': svg, 'stm': stm };
    }


}

exports.Paser_fsm_vlog = Paser_fsm_vlog;
